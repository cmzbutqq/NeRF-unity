# Instant-NGP 训练参数说明

## 概述

本文档说明 Unity 训练控制器中各个训练参数的含义和推荐设置。

## 训练参数详解

### 1. Training Steps (训练步数)

- **含义**: 训练的总步数，每步包含一次前向传播和反向传播
- **推荐值**: 2000 - 5000 步
- **说明**:
  - 2000 步: 快速预览，质量一般
  - 3000 步: 平衡质量和速度
  - 5000 步: 高质量，但训练时间较长

### 2. Save Interval (保存间隔)

- **含义**: 每隔多少步保存一次模型快照
- **推荐值**: 100 - 200 步
- **说明**:
  - 100 步: 频繁保存，便于监控进度
  - 200 步: 平衡保存频率和磁盘空间

### 3. Model Save Path (模型保存路径)

- **含义**: 训练完成后.msgpack 模型文件的保存位置
- **默认值**: `./trained_models`
- **说明**:
  - 路径会自动创建
  - 模型文件名: `unity_scene.msgpack`
  - 文件大小: 通常 10-50MB

## Instant-NGP 命令行参数

### 基本格式

```bash
instant-ngp.exe data/nerf/unity_scene --n_steps 2000 --save_snapshot ./trained_models/unity_scene.msgpack
```

### 主要参数说明

- `data/nerf/unity_scene`: 数据集路径
- `--n_steps 2000`: 训练步数
- `--save_snapshot path`: 模型保存路径
- `--aabb_scale 32`: 场景边界缩放（可选）

## 训练过程监控

### 1. 实时状态

- Unity UI 显示当前训练状态
- 显示模型文件大小变化
- 估算训练进度

### 2. Instant-NGP GUI

- 显示实时渲染预览
- 显示训练损失曲线
- 显示当前训练步数

### 3. 模型文件生成

- 训练开始后会在指定路径生成.msgpack 文件
- 文件大小会随着训练进行而增长
- 训练完成后文件大小稳定

## 常见问题

### Q: 训练瞬间完成怎么办？

A: 检查训练步数设置，确保 `Training Steps` 大于 0

### Q: 找不到.msgpack 文件？

A: 检查模型保存路径是否正确，确保 Unity 有写入权限

### Q: 训练界面空白？

A: 确保 `UseShellExecute = true` 和 `CreateNoWindow = false`

### Q: 训练质量不好？

A: 增加训练步数到 3000-5000 步，检查数据集质量

## 性能优化建议

### 1. 训练步数

- 开发阶段: 1000-2000 步
- 测试阶段: 2000-3000 步
- 生产阶段: 3000-5000 步

### 2. 保存频率

- 快速迭代: 50-100 步保存
- 稳定训练: 100-200 步保存
- 长期训练: 200-500 步保存

### 3. 硬件要求

- GPU: RTX 3000/4000 系列
- 内存: 8GB 以上
- 存储: 确保有足够空间保存模型文件

## 下一步

训练完成后，.msgpack 文件可以：

1. 在 Unity 中加载进行实时渲染
2. 转换为其他 3D 格式（如.obj, .ply）
3. 用于场景重建和可视化
